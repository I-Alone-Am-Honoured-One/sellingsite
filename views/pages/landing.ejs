<%- include('../partials/header') %>
<% const categoryIcons = { Games: 'üéÆ', Consoles: 'üïπÔ∏è', Accessories: 'üéß', 'Gift Cards': 'üéÅ' }; %>
<section class="hero hero-rebuild">
  <div class="container hero-grid">
    <div class="hero-copy">
      <p class="badge">Marketplace meets guild profiles</p>
      <h1>A gaming-first resale hub with Discord-style profiles and Vinted-fast deals.</h1>
      <p class="subtitle">
        Browse verified drops, chat in real time, and show off your banner + avatar. Every seller gets a public
        profile at /username so buyers can scout their reputation before they buy.
      </p>
      <div class="hero-actions">
        <a class="button primary" href="/marketplace">Browse Marketplace</a>
        <% if (locals.currentUser) { %>
          <a class="button ghost" href="/listings/new">Create Listing</a>
        <% } else { %>
          <a class="button ghost" href="/auth/register">Join the arena</a>
        <% } %>
      </div>
      <div class="hero-tags">
        <span class="tag-chip">Custom banners</span>
        <span class="tag-chip">Avatar loadouts</span>
        <span class="tag-chip">Escrow shield</span>
        <span class="tag-chip">Guild chat</span>
      </div>
      <div class="hero-stats">
        <div class="stat-card">
          <span class="stat-icon" aria-hidden="true">üëæ</span>
          <div>
            <h3><%= stats?.users_count || 0 %>+</h3>
            <p>Active traders</p>
          </div>
        </div>
        <div class="stat-card">
          <span class="stat-icon" aria-hidden="true">üéØ</span>
          <div>
            <h3><%= stats?.listings_count || 0 %>+</h3>
            <p>Listings live</p>
          </div>
        </div>
        <div class="stat-card">
          <span class="stat-icon" aria-hidden="true">üõ°Ô∏è</span>
          <div>
            <h3><%= stats?.orders_count || 0 %>+</h3>
            <p>Trades protected</p>
          </div>
        </div>
      </div>
    </div>
    <div class="hero-visual hero-panels">
      <div class="hero-card hero-panel">
        <div class="hero-visual-header">
          <div>
            <p class="eyebrow">Server lounge</p>
            <h3>Live trade channels</h3>
          </div>
          <span class="hero-status">Online</span>
        </div>
        <ul class="channel-list">
          <li><span># hot-drops</span><span class="badge accent">+42</span></li>
          <li><span># console-swaps</span><span class="badge ghost">New</span></li>
          <li><span># seller-ratings</span><span class="badge">4.9‚òÖ</span></li>
          <li><span># escrow-support</span><span class="badge ghost">24/7</span></li>
        </ul>
        <p class="muted">Chat with sellers, track drops, and verify trade history in one place.</p>
      </div>
      <div class="hero-card hero-panel profile-snapshot">
        <div class="profile-banner demo-banner">
          <span class="badge accent">Featured</span>
        </div>
        <div class="profile-snapshot-body">
          <div class="profile-avatar-large">
            <span>V</span>
          </div>
          <div>
            <h3>ValkyrieHub</h3>
            <p class="muted">Custom neon banner ¬∑ 128 sales ¬∑ 4.9 rating</p>
          </div>
        </div>
        <div class="hero-chip-row">
          <span class="hero-chip">Public /valkyriehub</span>
          <span class="hero-chip">Banner builder</span>
          <span class="hero-chip">Verified seller</span>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="container section community-lobby">
  <div class="section-header">
    <div>
      <h2>Build your gamer identity</h2>
      <p class="muted">Customize your shopfront like a Discord profile and keep your buy/sell history visible.</p>
    </div>
    <a class="link" href="/settings">Customize profile</a>
  </div>
  <div class="lobby-grid">
    <div class="lobby-card">
      <h3>Banner + avatar loadout</h3>
      <p>Upload your banner art, pick neon colors, and set your avatar to match your shop vibe.</p>
    </div>
    <div class="lobby-card">
      <h3>Public /username pages</h3>
      <p>Every profile is shareable, so buyers can trust your reviews and see recent listings.</p>
    </div>
    <div class="lobby-card">
      <h3>Instant buyer chat</h3>
      <p>Move straight into messages from any listing and track escrow updates in real time.</p>
    </div>
  </div>
</section>

<section class="container section">
  <div class="section-header">
    <div>
      <h2>Featured categories</h2>
      <p class="muted">Everything a gamer needs, curated by category.</p>
    </div>
  </div>
  <div class="category-grid">
    <% (categories || []).forEach(category => { %> <!-- Safely iterate even if categories is undefined -->
      <a class="category-card" href="/marketplace?category=<%= encodeURIComponent(category) %>">
        <span class="category-icon" aria-hidden="true"><%= categoryIcons[category] || '‚ú®' %></span>
        <h3><%= category %></h3>
        <p>Shop the hottest <%= category.toLowerCase() %> drops.</p>
      </a>
    <% }) %>
  </div>
</section>

<section class="section alt">
  <div class="container">
    <div class="section-header">
      <div>
        <h2>Latest listings</h2>
        <p class="muted">Fresh finds from trusted sellers.</p>
      </div>
      <a class="link" href="/marketplace">See all</a>
    </div>
    <div class="card-grid">
      <% if (!latestListings || latestListings.length === 0) { %>
        <div class="empty-state">
          <h3>No listings yet</h3>
          <p>Be the first to post a listing in the marketplace.</p>
          <a class="button ghost" href="/listings/new">Create listing</a>
        </div>
      <% } %>
      <% (latestListings || []).forEach(listing => { %>
        <a class="card" href="/listings/<%= listing.id %>">
          <img src="<%= listing.image_url %>" alt="<%= listing.title %>" />
          <div class="card-body">
            <div class="card-title">
              <h3><%= listing.title %></h3>
              <span class="badge ghost"><%= listing.condition %></span>
            </div>
            <p class="price"><%= formatPrice(listing.price_cents) %></p>
            <p class="meta">Seller: <%= listing.seller_name %></p>
          </div>
        </a>
      <% }) %>
    </div>
  </div>
</section>

<section class="container section">
  <div class="section-header">
    <div>
      <h2>Trending now</h2>
      <p class="muted">Listings with the most activity this week.</p>
    </div>
  </div>
  <div class="card-grid">
    <% if (!trendingListings || trendingListings.length === 0) { %>
      <div class="empty-state">
        <h3>Trending list is warming up</h3>
        <p>New activity will appear here as buyers and sellers connect.</p>
        <a class="button ghost" href="/marketplace">Browse listings</a>
      </div>
    <% } %>
    <% (trendingListings || []).forEach(listing => { %>
      <a class="card" href="/listings/<%= listing.id %>">
        <img src="<%= listing.image_url %>" alt="<%= listing.title %>" />
        <div class="card-body">
          <div class="card-title">
            <h3><%= listing.title %></h3>
            <span class="badge accent">Trending</span>
          </div>
          <p class="price"><%= formatPrice(listing.price_cents) %></p>
          <p class="meta">Seller: <%= listing.seller_name %></p>
        </div>
      </a>
    <% }) %>
  </div>
</section>

<section class="section alt">
  <div class="container trust-grid">
    <div>
      <h2>Trust & safety controls</h2>
      <p>
        Every trade is backed by escrow protection, dispute resolution, and verified communication tools. Sellar keeps
        seller ratings and history in view so you always know who you are dealing with.
      </p>
      <ul class="trust-list">
        <li><span>üßæ</span>Secure escrow that auto-releases after confirmation.</li>
        <li><span>‚è±Ô∏è</span>Auto-confirm 24 hours after delivery if no dispute.</li>
        <li><span>üõ°Ô∏è</span>Dedicated safety team for escalations.</li>
      </ul>
    </div>
    <div class="trust-cards">
      <div class="trust-card">
        <h3>Level-up support</h3>
        <p>Priority chat, live status updates, and dispute mediation.</p>
      </div>
      <div class="trust-card">
        <h3>Seller scoreboard</h3>
        <p>Top sellers get instant payouts and highlight badges.</p>
      </div>
    </div>
  </div>
</section>

<section class="container section">
  <div class="section-header">
    <div>
      <h2>How Sellar works</h2>
      <p class="muted">From listing to delivery in four steps.</p>
    </div>
  </div>
  <div class="steps-grid">
    <div class="step-card">
      <span>1</span>
      <h3>List your gear</h3>
      <p>Add photos, condition, and shipping details in minutes.</p>
    </div>
    <div class="step-card">
      <span>2</span>
      <h3>Chat instantly</h3>
      <p>Message buyers and negotiate while keeping everything on-platform.</p>
    </div>
    <div class="step-card">
      <span>3</span>
      <h3>Ship with tracking</h3>
      <p>Mark items shipped and keep buyers updated.</p>
    </div>
    <div class="step-card">
      <span>4</span>
      <h3>Get paid</h3>
      <p>Funds release after confirmation or auto-release after 24 hours.</p>
    </div>
  </div>
</section>

<section class="section alt">
  <div class="container">
    <div class="section-header">
      <div>
        <h2>Players love Sellar</h2>
        <p class="muted">Real stories from the marketplace.</p>
      </div>
    </div>
    <div class="testimonial-grid">
      <div class="testimonial-card">
        <p>‚ÄúSold my Switch in 2 hours. The escrow made the buyer super confident.‚Äù</p>
        <span>‚Äî Lani, console seller</span>
      </div>
      <div class="testimonial-card">
        <p>‚ÄúThe chat and tracking updates kept everything smooth. Loved the neon vibe!‚Äù</p>
        <span>‚Äî Marco, PC builder</span>
      </div>
      <div class="testimonial-card">
        <p>‚ÄúFinally a marketplace built for gamers. The categories make it easy to browse.‚Äù</p>
        <span>‚Äî Ade, collector</span>
      </div>
    </div>
  </div>
</section>

<section class="container section">
  <div class="section-header">
    <div>
      <h2>FAQ</h2>
      <p class="muted">Got questions? We have answers.</p>
    </div>
  </div>
  <div class="faq-grid">
    <div class="faq-card">
      <h3>How long do payouts take?</h3>
      <p>After the buyer confirms delivery (or 24 hours after delivery), funds release instantly.</p>
    </div>
    <div class="faq-card">
      <h3>What if something goes wrong?</h3>
      <p>Open a dispute within 24 hours of delivery. Our safety team reviews every claim.</p>
    </div>
    <div class="faq-card">
      <h3>Is shipping required?</h3>
      <p>You can offer local pickup too. Add the details in your listing so buyers know the options.</p>
    </div>
  </div>
</section>
</div>
<%- include('../partials/footer') %>
